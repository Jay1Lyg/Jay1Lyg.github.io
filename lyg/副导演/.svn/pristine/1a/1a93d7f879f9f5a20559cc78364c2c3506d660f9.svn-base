doctype html
html(lang='zh-CN')
  head
    meta(charset='utf-8')
    meta(http-equiv='X-UA-Compatible', content='IE=edge')
    meta(name='viewport', content='width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no,minimal-ui')
    title 角色信息
    link(rel='stylesheet', href='/css/jqueryWeui.css')
    link(rel='stylesheet', href='/css/weui.css')
    link(rel='stylesheet', href='/css/weui2.css')
    link(rel='stylesheet', href='/css/actor_edit_echart.css')
    link(rel='stylesheet', href='/css/noticeJob.css')
    link(rel='stylesheet', href='/css/program.css')
    style.
      * {
      padding: 0;
      margin: 0;
      list-style: none
      }
      body {
      background: white
      }
    script(type='text/javascript').
      // document.getElementsByTagName("html")[0].style.fontSize = document.documentElement.clientWidth / 8 + "px";
    script(type='text/javascript', src='/js/jquery.min.js')
    // <script type="text/javascript" src="js/jqWeui.js"></script>
    script(type='text/javascript', src='/js/zepto.min.js')
    script(type='text/javascript', src='/js/rootfont.js')
    script(type='text/javascript', src='/js/tab.js')
    script(type='text/javascript', src='/js/url.js')
  body
    header#header
      div(style='text-align: center')
        p 方案
    .program
      .slider
      .bai
        ul
          li 0%
          li 10%
          li 20%
          li 30%
          li 40%
          li 50%
          li 60%
          li 70%
          li 80%
          li 90%
          li 100%
      div(style='clear: both')
      .slide_info
        ul
          li
            span.one_kuai
            | 领衔主演
          li
            span.two_kuai
            | 主要演员
          li
            span.three_kuai
            | 客串演员
          li
            span.four_kuai
            | 其他演员
    div(style='clear: both')
    .notice_class.ling
    .notice_class.zhu
    .notice_class.ke
    .notice_class.qi
  script.
   
   ///WX/wx_searchProgrammeDetails/:production_id/:actorbudget_id/:programme_id/:attribute;
   var production_id=!{JSON.stringify(production_id)};
   var actorbudget_id=!{JSON.stringify(actorbudget_id)};
   var programme_id=!{JSON.stringify(programme_id)};
   var attribute=!{JSON.stringify(attribute)};
   function list(){
          var juzu_url=url+'/WX/wx_searchProgrammeDetails/'+production_id+'/'+actorbudget_id+'/'+programme_id+'/'+attribute;
          console.log(juzu_url);
          $.ajax({
              type : "get",
              url : juzu_url,
              dataType : "jsonp",
              async:false,
              // jsonp: "jsonpCallback",
              success : function(data){
                  console.log(data);
                  var datas=data,roleInfo=data.roleInfo;
                  var str_ratio="";
                   str_ratio=`<div class="one_slider">${datas.leadingactor_budget_ratio*100}%</div>
                              <div class="two_slider">${datas.starringingroup_budget_ratio*100}%</div>
                              <div class="three_slider">${datas.guestactor_budget_ratio*100}%</div>
                              <div class="four_slider">${datas.other_budget_ratio*100}%</div>`;
                  $(".slider").html(str_ratio);
                  //画出比例图
                  $(".one_slider").css("width",datas.leadingactor_budget_ratio*100+"%");
                  $(".two_slider").css("width",datas.starringingroup_budget_ratio*100+"%");
                  $(".three_slider").css("width",datas.guestactor_budget_ratio*100+"%");
                  $(".four_slider").css("width",datas.other_budget_ratio*100+"%");
                  var obj2=roleInfo.obj2,
                     obj3=roleInfo.obj3,
                     obj4=roleInfo.obj4,
                     obj5=roleInfo.obj5,
                     str2="",
                     str3="",
                     str4="",
                     str5="",
                     str_all2="";
                     str_all3="";
                     str_all4="";
                     str_all5="";
                  function actorInfo(obj,html,str,str_all){
                    if(obj==undefined){
                      $(html).html();
                    }else{
                      
                      for(var i=0;i<obj.length;i++){
                        if(obj[i].gender==1){
                                  obj[i].gender="男";
                              }else if(obj[i].gender==2){
                                  obj[i].gender="女";
                              }else if(obj[i].gender==3){
                                  obj[i].gender="不限";
                              }
                              //obj[i].genger=obj[i].genger=="1"?"男":obj[i].genger=="2"?"女":obj[i].genger=="3"?"不限";
                              //-------------年龄------------
                              if(obj[i].age=="1"){
                                 obj[i].age="婴幼儿";
                              }else if(obj[i].age=="2"){
                                 obj[i].age="少年";
                              }else if(obj[i].age=="3"){
                                  obj[i].age="青年";
                              }else if(obj[i].age=="4"){
                                  obj[i].age="中年";
                              }else if(obj[i].age=="5"){
                                  obj[i].age="老年";
                              }else if(obj[i].age=="6"){
                                  obj[i].age="不限";
                              }
                              //-------------体质------------
                              if(obj[i].shape=="1"){
                                  obj[i].shape="极瘦";
                              }else if(obj[i].shape=="2"){
                                  obj[i].shape = "偏瘦";
                              }else if(obj[i].shape=="3"){
                                  obj[i].shape = "适中";
                              }else if(obj[i].shape=="4"){
                                  obj[i].shape = "健壮";
                              }else if(obj[i].shape=="5"){
                                  obj[i].shape = "偏胖";
                              }else if(obj[i].shape=="0"){
                                  obj[i].shape = "不限";
                              }
                              //-------------身高------------
                              var height;
                              obj[i].height=height;
                              if(obj[i].min_height=="" && obj[i].max_height==""){
                                 obj[i].height= "不限";

                              }else if(obj[i].min_height=="" && obj[i].max_height!=""){
                                  obj[i].height= "<="+obj[i].max_height;

                              }else if(obj[i].min_height!="" && obj[i].max_height==""){
                                  obj[i].height= ">="+obj[i].min_height;

                              }else if(obj[i].min_height!="" && obj[i].max_height!=""){
                                  obj[i].height= obj[i].min_height+'-' +obj[i].max_height;
                              }
                          str_all+=`<div class="information_actor">
                                    <ul>
                                        <li>职位名称：${obj[i].crews_name}</li>
                                        <li>性别：${obj[i].gender}</li>
                                        <li>年龄段：${obj[i].age}</li>
                                        <li>身高(cm)：${obj[i].height}</li>

                                    </ul>
                                    <p class="all_info">查看全部信息</p>
                                    <div class="information_actornone">
                                        <ul>
                                            <li>体型：${obj[i].shape}</li>
                                            <li>招募数量：${obj[i].men_count}</li>
                                            <li>技能特长：${obj[i].skillTag}</li>
                                            <li>特征：${obj[i].featureTag}</li>
                                        </ul>
                                        <div>
                                            <p>人物小传</p>
                                            <textarea class="weui-textarea" placeholder="请输入文本" rows="3">${obj[i].crews_name}</textarea>
                                        </div>
                                        <p class="put_away">收起</p>
                                    </div>
                                </div>`
                          str_user+=`<div class="weui_cell slidelefts">
                                            <div class="weui_cell_bd weui_cell_primary ">
                                                <div>
                                                    <div class="recommend_edit" style="height: 132px">
                                                        <div>
                                                            <img src="img/img1.png" alt="" class="chart">
                                                        </div>
                                                        <div>
                                                            <p style="font-size: 14px">与旗下演员<span></span>匹配度较高</p>
                                                            <div id="main" style="width: 100px;height:100px;float: left;"></div>
                                                            <ul class="pipei">
                                                                <li>基本信息：</li>
                                                                <li>特征角色：</li>
                                                                <li>片酬需求：</li>
                                                                <li>档期匹配：</li>
                                                            </ul>
                                                        </div>
                                                    </div>

                                                </div>

                                            </div>
                                            <div class="slideleft">
                                                <span class="bg-green f-white">删除</span>
                                            </div>
                                        </div>`
                        }
                      str=`<div class="notice_type">
                                <p>主要演员</p>
                                <p class="jiantou"><img src="/img/sanyou.png" alt=""><img src="/img/sanxia.png" alt=""></p>

                            </div>
                            <div class="detail_type">
                               ${str_all}
                                    <div class="beixuan">
                                        
                                        <div class="weui_cell slidelefts">
                                            <div class="weui_cell_bd weui_cell_primary ">
                                                <div>
                                                    <div class="recommend_edit" style="height: 132px">
                                                        <div>
                                                            <img src="img/img1.png" alt="" class="chart">
                                                        </div>
                                                        <div>
                                                            <p style="font-size: 14px">与旗下演员<span>刘德华</span>匹配度较高</p>
                                                            <!--<div id="main" style="width: 100px;height:100px;float: left;"></div>-->
                                                            <ul class="pipei">
                                                                <li>基本信息：</li>
                                                                <li>特征角色：</li>
                                                                <li>片酬需求：</li>
                                                                <li>档期匹配：</li>
                                                            </ul>
                                                        </div>
                                                    </div>

                                                </div>

                                            </div>
                                            <div class="slideleft">
                                                <span class="bg-green f-white">删除</span>
                                            </div>
                                        </div>

                                        <div class="more_actor">
                                            <p class="button1"><span class="weui-badge" style="margin-left: 5px;background: #4da2ad">8</span>备选演员
                                            </p>
                                            <p class="button2">更多推荐<span class="weui-badge"
                                                                         style="margin-left: 5px;background: white;color: #4da2ad">8</span></p>
                                        </div>
                                    </div>
                                    <p style="width: 100%;height: 0.2rem;background:#f2f2f2;clear: both;"></p>
                                </div>
                            </div>`
                            $(html).html(str)

                    };
                  };
                  actorInfo(obj2,".ling",str2,str_all2);
                  
                   toggle($(".notice_type"));
                  $(".detail_type").on("click", ".all_info", function () {
                  $(this).hide();
                  $(this).next(".information_actornone").show()
                  });
                  $(".detail_type").on("click", ".put_away", function () {
                  $(this).parent(".information_actornone").prev(".all_info").show();
                  $(this).parent(".information_actornone").hide();
                  });
                 
                 
              },
              error:function(err){
                 console.log(err)
              }
          });
        };
        list();
   